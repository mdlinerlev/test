"use strict";function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}window.addEventListener("load",function(){formValidateInit(".form-item")});var formValidateInit=function(a){var b="invalid",c="[data-mask-init]",d="[datepicker]",e="[required]",f=".country-mask",g="required-text",h="required-number",i="required-email",j="required-radiobutton",k="required-checkbox",l="required-select",m="country-mask",n="input-file",o="input-file-multiple",p="input-password",q=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],c=document.querySelectorAll(a);c.length&&Array.from(c).map(function(a){$(a).styler({onFormStyled:function(){var a=this[0];b.length&&b.map(function(b){return b(a)})},onSelectClosed:function(){this[0].querySelector("select").dispatchEvent(new Event("change",{bubbles:!0}))}})})},r=function(){q(".mfp-content .styler",[G])},s=function(a){var b=a.dataset.lang,d=a.dataset.src,e=a.dataset.template,f=null,g=null,h=null,i=null,j=null;fetch("".concat(getConstant("date-data"))).then(function(a){return a.json()}).then(function(k){var l=null;for(var m in"ru"===b&&(l=k.ru),"en"===b&&(l=k.en),l)l[m].dayNames&&(f=l[m].dayNames),l[m].dayNamesShort&&(g=l[m].dayNamesShort),l[m].dayNamesMin&&(h=l[m].dayNamesMin),l[m].monthNames&&(i=l[m].monthNames),l[m].monthNamesShort&&(j=l[m].monthNamesShort);$(a).datepicker({firstDay:1,changeMonth:!0,changeYear:!0,yearRange:"1980:c+1",minDate:new Date(1980,9,25),showOn:"button",dateFormat:e,buttonImage:d,buttonImageOnly:!0,dayNames:f,dayNamesShort:g,monthNames:i,dayNamesMin:h,monthNamesShort:j,afterShow:function(){q(".ui-datepicker-title select")},onSelect:function(){var b=c.slice(1,-1);(""===a.getAttribute(b)||a.getAttribute(b)===b)&&(a.setCustomValidity(""),A(a))}}).click(function(){$(a).datepicker("show")})})},t=function(){var a=document.querySelectorAll(".mfp-content ".concat(d));a.length&&Array.from(a).map(function(a){return s(a)})};(function(){var a=document.querySelectorAll(d);a.length&&($.datepicker._updateDatepicker_original=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(a){$.datepicker._updateDatepicker_original(a);var b=this._get(a,"afterShow");b&&b.apply(a.input?a.input[0]:null)})})();var u=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[];$.magnificPopup.open({items:{src:a},type:"ajax",closeOnBgClick:!0,callbacks:{ajaxContentAdded:function(){b.length&&b.map(function(a){return a()})}}})},v=function(a){var b=a.dataset.mask,c=a.dataset.placeholder,d={clearMaskOnLostFocus:!0,clearIncomplete:!0,oncleared:function(){a.required&&(a.setCustomValidity("Invalid field"),A(a))},onincomplete:function(){a.required&&(a.setCustomValidity("Invalid field"),A(a))},oncomplete:function(){a.required&&(a.setCustomValidity(""),A(a))}};c&&(d.placeholder=c),Inputmask(b,d).mask(a)},w=function(){var a=document.querySelectorAll(".mfp-content ".concat(c));a.length&&Array.from(a).map(function(a){return v(a)})},x=function(a){$.magnificPopup.open({items:{src:a},type:"inline",closeOnBgClick:!0})},y=function(a){a.classList.add("valid"),a.classList.remove(b)},z=function(a){a.classList.add(b),a.classList.remove("valid")},A=function(b){var c=b.closest(a);b.validity.valid?y(c):z(c)},B=function(c){var d=c.closest(a);c.required=!1,c.setCustomValidity(""),d.classList.remove("valid"),d.classList.remove(b)},C=function(c){var d=c.closest(a);c.setCustomValidity(""),d.classList.remove("valid"),d.classList.remove(b)},D=function(a){a.value.match(/[^0-9^+]/g)&&(a.value=a.value.replace(/[^0-9]/g,""))},E=function(a){var b=a.value;0<b.length&&1!==(b.match(/[a-z0-9]\@.+[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}/g)||[]).length?a.setCustomValidity("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u044D\u0442\u043E \u043F\u043E\u043B\u0435"):a.setCustomValidity(""),A(a)},F=function(a){var b=a.value;0<b.length&&1!==(b.match(/[a-z0-9]\@.+[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}/g)||[]).length?(a.setCustomValidity("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u044D\u0442\u043E \u043F\u043E\u043B\u0435"),a.required=!0,A(a)):""===b?B(a):(a.setCustomValidity(""),a.required=!1,A(a))},G=function(a){if(a.getAttribute(DATA_ACTION)===m){var b=a.querySelectorAll("option"),c=a.closest(f),d=c.querySelector("input[type=\"tel\"][data-mask]"),e=c.querySelector("[data-result-value]");b.length&&Array.from(b).map(function(a,b){if(!a.classList.contains("no-mask")){var d=c.querySelectorAll(".jq-selectbox__dropdown li"),e=d[b];if(e){e.style.backgroundImage="url(\"".concat(a.dataset.img,"\")");var f=c.querySelector(".selected.sel");f&&(c.querySelector(".jq-selectbox__select-text").style.backgroundImage=f.style.backgroundImage)}}}),d.addEventListener("input",function(){e.value=d.value})}},H=function(a){var b=a.closest(f),c=b.querySelector("[data-result-value]"),d=b.querySelector("input[data-mask]"),e=a.options[a.selectedIndex],g=e.dataset.placeholder,h=e.dataset.img,i=a.value;d.inputmask&&d.inputmask.remove(),d.value="",C(d),e.classList.contains("no-mask")?(b.querySelector(".jq-selectbox__select-text").style.backgroundImage="none",d.setAttribute("placeholder","_______"),d.setAttribute("data-mask",""),d.setAttribute("data-placeholder",""),c.value=d.value):(b.querySelector(".jq-selectbox__select-text").style.backgroundImage="url(\"".concat(h,"\")"),d.setAttribute("placeholder",g),d.setAttribute("data-mask",i),d.setAttribute("data-placeholder",g),v(d),c.value="".concat(a.value," ").concat(d.value))},I=function(b){var c=b.closest(a),d=c.querySelectorAll("input[type=\"checkbox\"]"),e=c.querySelector("input[type=\"checkbox\"]:checked"),f=c.querySelectorAll("input[type=\"checkbox\"]:not(:checked)");e?(Array.from(f).map(function(a){a.required=!1}),A(e)):(Array.from(d).map(function(a){a.required=!0}),A(b))},J=function(b){var c=b.files,d=b.closest(a).querySelector(".input-file"),e=d.dataset.text;d.textContent=c.length?c[0].name:e,b.required&&A(b)},K=function(b){var c=b.files,d=b.closest(a).querySelector(".input-file-list");d.innerHTML="";for(var e,f=0;f<c.length;f++){e=document.createElement("li"),e.setAttribute("data-lastModified",c[f].lastModified),e.setAttribute("data-size",c[f].size),e.textContent=c[f].name;var g=document.createElement("span");g.addEventListener("click",M),e.append(g),d.append(e)}b.required&&L(b)},L=function(a){var b=a.files,c=parseInt(a.dataset.filesCount);b.length&&b.length<=c?a.setCustomValidity(""):a.setCustomValidity("Invalid field"),A(a)},M=function c(b){var d=b.target,e=d.closest("li"),f=d.closest(a).querySelector("input[type=\"file\"]"),g=_toConsumableArray(f.files),h=parseInt(e.dataset.lastmodified),i=parseInt(e.dataset.size),j=e.textContent,k=g.filter(function(a){var b=a.lastModified,c=a.name,d=a.size;return b!==h&&c!==i&&d!==j});f.files=new N(k),d.dispatchEvent(new Event("change",{bubbles:!0})),d.removeEventListener("click",c),d.closest("li").remove(),f.required&&L(f)},N=function(a){for(var c=new ClipboardEvent("").clipboardData||new DataTransfer,b=0,d=a.length;b<d;b++)c.items.add(a[b]);return c.files},O=function(a){var b=_toConsumableArray(a.files);a.addEventListener("click",function(a){b=_toConsumableArray(a.target.files)}),a.addEventListener("change",function(c){var d=_toConsumableArray(c.target.files);b.length?Array.from(d).map(function(a){var c=a.lastModified,d=a.name,e=a.size,f=b.filter(function(a){return c===a.lastModified||d===a.name||e===a.size});f.length||b.push(a)}):b=_toConsumableArray(d),a.files=new N(b)})},P=function(a){console.log(a)};q(".styler",[G]);var Q=document.querySelectorAll(c);Q&&Array.from(Q).map(function(a){return v(a)});var R=document.querySelectorAll(d);R.length&&Array.from(R).map(function(a){return s(a)});var S=document.querySelectorAll("input[type=\"file\"][multiple]");S.length&&Array.from(S).map(function(a){return O(a)}),document.addEventListener("click",function(a){var b=a.target.closest("[".concat(DATA_ACTION,"]"));if(b){var d=b.getAttribute(DATA_ACTION),f=a.target,m=f.dataset.href;d.split(" ").map(function(b){if(b==="open-ajax-popup"&&(a.preventDefault(),u(m,[r,t,w])),b==="open-inline-popup"&&(a.preventDefault(),x(m)),b==="form-submit"){var d=["[".concat(DATA_ACTION,"=\"").concat(g,"\"]"),"[".concat(DATA_ACTION,"=\"").concat(h,"\"]"),"[".concat(DATA_ACTION,"=\"").concat(i,"\"]"),"[".concat(DATA_ACTION,"=\"").concat(l,"\"]"),"[".concat(DATA_ACTION,"=\"").concat(j,"\"]"),"[".concat(DATA_ACTION,"=\"").concat(k,"\"]"),"[".concat(DATA_ACTION,"=\"").concat(p,"\"]"),"[".concat(DATA_ACTION,"=\"").concat(n,"\"]").concat(e),"[".concat(DATA_ACTION,"=\"").concat(o,"\"]").concat(e),"".concat(c).concat(e)],q=f.closest("form").querySelectorAll(d.join(", "));q.length&&Array.from(q).map(function(a){return A(a)})}})}}),document.addEventListener("input",function(a){var b=a.target.closest("[".concat(DATA_ACTION,"]"));if(b){var c=b.getAttribute(DATA_ACTION);c.split(" ").map(function(a){(a===g||a===h)&&A(b),a===i&&E(b),a==="email-input-control"&&F(b),a==="num-inset"&&D(b),a===p&&P(b)})}}),document.addEventListener("change",function(a){var b=a.target.closest("[".concat(DATA_ACTION,"]"));if(b){var c=b.getAttribute(DATA_ACTION);c.split(" ").map(function(a){(a===j||a===l)&&A(b),a===k&&I(targetNode),a===m&&H(b),a===n&&J(b),a===o&&K(b)})}})};